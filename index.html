<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>МВДУслуги | Клан МВД</title>
    <link rel="icon" type="image/jpg" href="ZT.jpg">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        :root {
            --primary: #1a237e;
            --primary-light: #534bae;
            --secondary: #283593;
            --accent: #3949ab;
            --background: #f5f5f5;
            --surface: #ffffff;
            --text: #212121;
            --text-light: #757575;
            --border: #e0e0e0;
            --success: #2e7d32;
            --error: #c62828;
            --warning: #f57c00;
            
            /* Liquid Glass эффекты */
            --glass-blur: 10px;
            --glass-opacity: 0.2;
            --glass-border: 1px solid rgba(255, 255, 255, 0.18);
            --glass-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: var(--background);
            color: var(--text);
            font-family: 'Inter', sans-serif;
            min-height: 100vh;
            line-height: 1.6;
            transition: all 0.5s ease;
        }
        
        /* Liquid Glass режим */
        body.liquid-glass {
            --background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --surface: rgba(255, 255, 255, 0.25);
            --border: 1px solid rgba(255, 255, 255, 0.18);
            
            /* Эффект стекла */
            backdrop-filter: blur(var(--glass-blur));
            -webkit-backdrop-filter: blur(var(--glass-blur));
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* Header */
        header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            position: sticky;
            top: 0;
            z-index: 1000;
            transition: all 0.5s ease;
        }
        
        body.liquid-glass header {
            background: rgba(26, 35, 126, 0.7);
            backdrop-filter: blur(var(--glass-blur));
            -webkit-backdrop-filter: blur(var(--glass-blur));
            box-shadow: var(--glass-shadow);
            border-bottom: var(--glass-border);
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .logo-icon {
            width: 50px;
            height: 50px;
            background: white;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: bold;
            color: var(--primary);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            overflow: hidden;
            transition: all 0.5s ease;
        }
        
        body.liquid-glass .logo-icon {
            background: rgba(255, 255, 255, 0.9);
            box-shadow: var(--glass-shadow);
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
        }
        
        .logo-icon img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .logo-text h1 {
            font-size: 24px;
            font-weight: 700;
            color: white;
        }
        
        .logo-text p {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.8);
        }
        
        .user-menu {
            display: flex;
            gap: 15px;
            align-items: center;
        }
        
        .user-info {
            color: white;
            font-weight: 600;
            padding: 10px 15px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            transition: all 0.5s ease;
        }
        
        body.liquid-glass .user-info {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
            border: var(--glass-border);
        }
        
        /* Переключатель режимов */
        .theme-toggle {
            display: flex;
            align-items: center;
            gap: 10px;
            color: white;
            font-weight: 500;
        }
        
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 30px;
        }
        
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(255, 255, 255, 0.2);
            transition: .4s;
            border-radius: 34px;
        }
        
        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        input:checked + .toggle-slider {
            background-color: var(--accent);
        }
        
        input:checked + .toggle-slider:before {
            transform: translateX(30px);
        }
        
        .toggle-label {
            font-size: 14px;
        }
        
        .btn {
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid white;
            color: white;
            padding: 10px 20px;
            font-family: 'Inter', sans-serif;
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-radius: 8px;
            backdrop-filter: blur(10px);
        }
        
        body.liquid-glass .btn {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(var(--glass-blur));
            -webkit-backdrop-filter: blur(var(--glass-blur));
            box-shadow: var(--glass-shadow);
            border: var(--glass-border);
        }
        
        .btn:hover {
            background: white;
            color: var(--primary);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }
        
        body.liquid-glass .btn:hover {
            background: rgba(255, 255, 255, 0.3);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
        }
        
        .btn-primary {
            background: white;
            color: var(--primary);
        }
        
        .btn-danger {
            background: var(--error);
            color: white;
            border-color: var(--error);
        }
        
        .btn-success {
            background: var(--success);
            color: white;
            border-color: var(--success);
        }
        
        .btn-warning {
            background: var(--warning);
            color: white;
            border-color: var(--warning);
        }
        
        /* Auth Forms */
        .auth-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 80vh;
            padding: 40px 0;
        }
        
        .auth-box {
            background: var(--surface);
            border-radius: 16px;
            padding: 40px;
            width: 100%;
            max-width: 500px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            border: 1px solid var(--border);
            transition: all 0.5s ease;
        }
        
        body.liquid-glass .auth-box {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(var(--glass-blur));
            -webkit-backdrop-filter: blur(var(--glass-blur));
            box-shadow: var(--glass-shadow);
            border: var(--glass-border);
        }
        
        .auth-tabs {
            display: flex;
            margin-bottom: 30px;
            border-bottom: 1px solid var(--border);
        }
        
        .auth-tab {
            flex: 1;
            text-align: center;
            padding: 15px;
            cursor: pointer;
            font-weight: 600;
            font-size: 18px;
            transition: all 0.3s ease;
            position: relative;
            color: var(--text-light);
        }
        
        .auth-tab.active {
            color: var(--primary);
        }
        
        .auth-tab.active::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 0;
            width: 100%;
            height: 3px;
            background: var(--primary);
        }
        
        .auth-form {
            display: none;
        }
        
        .auth-form.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text);
        }
        
        .form-input {
            width: 100%;
            padding: 12px 15px;
            background: var(--background);
            border: 2px solid var(--border);
            border-radius: 8px;
            color: var(--text);
            font-family: 'Inter', sans-serif;
            font-size: 16px;
            transition: all 0.3s ease;
        }
        
        body.liquid-glass .form-input {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
            border: var(--glass-border);
            color: white;
        }
        
        body.liquid-glass .form-input::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }
        
        .form-input:focus {
            outline: none;
            border-color: var(--primary);
            background: white;
        }
        
        body.liquid-glass .form-input:focus {
            background: rgba(255, 255, 255, 0.25);
            border-color: rgba(255, 255, 255, 0.5);
        }
        
        .form-submit {
            width: 100%;
            padding: 15px;
            margin-top: 10px;
            background: var(--primary);
            border: none;
            border-radius: 8px;
            color: white;
            font-family: 'Inter', sans-serif;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .form-submit:hover {
            background: var(--secondary);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(26, 35, 126, 0.3);
        }
        
        .form-footer {
            text-align: center;
            margin-top: 20px;
            font-size: 14px;
            color: var(--text-light);
        }
        
        .form-footer a {
            color: var(--primary);
            text-decoration: none;
            font-weight: 500;
        }
        
        .form-footer a:hover {
            text-decoration: underline;
        }
        
        /* Success Message */
        .success-message {
            display: none;
            text-align: center;
            padding: 30px;
        }
        
        .success-icon {
            font-size: 60px;
            color: var(--success);
            margin-bottom: 20px;
        }
        
        .success-message h2 {
            color: var(--primary);
            margin-bottom: 15px;
        }
        
        /* Loading */
        .loading {
            display: none;
            text-align: center;
            padding: 30px;
        }
        
        .loading-spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid var(--primary);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Verification */
        .verification-form {
            display: none;
        }
        
        .verification-form.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        .verification-code {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin: 20px 0;
        }
        
        .code-input {
            width: 50px;
            height: 60px;
            text-align: center;
            font-size: 24px;
            font-weight: bold;
            border: 2px solid var(--border);
            border-radius: 8px;
            background: var(--background);
        }
        
        body.liquid-glass .code-input {
            background: rgba(255, 255, 255, 0.15);
            border: var(--glass-border);
            color: white;
        }
        
        .code-input:focus {
            outline: none;
            border-color: var(--primary);
        }
        
        .verification-info {
            background: rgba(76, 175, 80, 0.1);
            border: 1px solid var(--success);
            border-radius: 8px;
            padding: 15px;
            margin: 20px 0;
            text-align: center;
        }
        
        .verification-info i {
            color: var(--success);
            margin-right: 10px;
        }
        
        .timer {
            font-weight: bold;
            color: var(--primary);
        }
        
        .resend-link {
            color: var(--primary);
            cursor: pointer;
            text-decoration: underline;
        }
        
        .resend-link:hover {
            color: var(--secondary);
        }
        
        /* Main Content */
        .main-content {
            display: none;
            grid-template-columns: 1fr 3fr;
            gap: 30px;
            margin-top: 30px;
        }
        
        /* Sidebar */
        .sidebar {
            background: var(--surface);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            border: 1px solid var(--border);
            transition: all 0.5s ease;
        }
        
        body.liquid-glass .sidebar {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(var(--glass-blur));
            -webkit-backdrop-filter: blur(var(--glass-blur));
            box-shadow: var(--glass-shadow);
            border: var(--glass-border);
        }
        
        .sidebar h2 {
            font-size: 18px;
            margin-bottom: 20px;
            color: var(--primary);
            padding-bottom: 10px;
            border-bottom: 2px solid var(--border);
        }
        
        body.liquid-glass .sidebar h2 {
            color: white;
            border-bottom: 2px solid rgba(255, 255, 255, 0.3);
        }
        
        .sidebar ul {
            list-style: none;
        }
        
        .sidebar li {
            margin-bottom: 10px;
        }
        
        .sidebar a {
            color: var(--text);
            text-decoration: none;
            transition: all 0.3s ease;
            display: block;
            padding: 10px;
            border-radius: 8px;
            font-weight: 500;
        }
        
        body.liquid-glass .sidebar a {
            color: white;
        }
        
        .sidebar a:hover {
            color: var(--primary);
            background: var(--background);
        }
        
        body.liquid-glass .sidebar a:hover {
            color: white;
            background: rgba(255, 255, 255, 0.2);
        }
        
        .sidebar a i {
            margin-right: 10px;
            width: 20px;
            text-align: center;
        }
        
        /* Content */
        .content {
            display: flex;
            flex-direction: column;
            gap: 30px;
        }
        
        .status-panel {
            background: var(--surface);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            border: 1px solid var(--border);
            transition: all 0.5s ease;
        }
        
        body.liquid-glass .status-panel {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(var(--glass-blur));
            -webkit-backdrop-filter: blur(var(--glass-blur));
            box-shadow: var(--glass-shadow);
            border: var(--glass-border);
        }
        
        .status-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .status-header h2 {
            font-size: 22px;
            color: var(--primary);
        }
        
        body.liquid-glass .status-header h2 {
            color: white;
        }
        
        .status-indicator {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .status-dot {
            width: 12px;
            height: 12px;
            background: var(--success);
            border-radius: 50%;
        }
        
        .status-text {
            color: var(--success);
            font-weight: 600;
        }
        
        body.liquid-glass .status-text {
            color: #a5d6a7;
        }
        
        .services-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .service-card {
            background: var(--surface);
            border-radius: 12px;
            padding: 20px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            border: 1px solid transparent;
        }
        
        body.liquid-glass .service-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            box-shadow: var(--glass-shadow);
            border: var(--glass-border);
        }
        
        .service-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
            border-color: var(--primary);
        }
        
        body.liquid-glass .service-card:hover {
            border-color: rgba(255, 255, 255, 0.5);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }
        
        .service-icon {
            font-size: 36px;
            margin-bottom: 15px;
            color: var(--primary);
        }
        
        body.liquid-glass .service-icon {
            color: white;
        }
        
        .service-card h3 {
            font-size: 18px;
            margin-bottom: 10px;
            color: var(--primary);
        }
        
        body.liquid-glass .service-card h3 {
            color: white;
        }
        
        .service-card p {
            font-size: 14px;
            color: var(--text-light);
            margin-bottom: 15px;
        }
        
        body.liquid-glass .service-card p {
            color: rgba(255, 255, 255, 0.8);
        }
        
        /* Footer */
        footer {
            background: var(--surface);
            margin-top: 50px;
            padding: 30px 0;
            border-top: 1px solid var(--border);
            transition: all 0.5s ease;
        }
        
        body.liquid-glass footer {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(var(--glass-blur));
            -webkit-backdrop-filter: blur(var(--glass-blur));
            border-top: var(--glass-border);
        }
        
        .footer-content {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 30px;
        }
        
        .footer-section h3 {
            font-size: 18px;
            color: var(--primary);
            margin-bottom: 15px;
        }
        
        body.liquid-glass .footer-section h3 {
            color: white;
        }
        
        .footer-section p, .footer-section li {
            color: var(--text-light);
            font-size: 14px;
        }
        
        body.liquid-glass .footer-section p, 
        body.liquid-glass .footer-section li {
            color: rgba(255, 255, 255, 0.8);
        }
        
        .footer-section ul {
            list-style: none;
        }
        
        .footer-section li {
            margin-bottom: 8px;
        }
        
        .footer-section a {
            color: var(--text-light);
            text-decoration: none;
            transition: color 0.3s ease;
        }
        
        body.liquid-glass .footer-section a {
            color: rgba(255, 255, 255, 0.8);
        }
        
        .footer-section a:hover {
            color: var(--primary);
        }
        
        body.liquid-glass .footer-section a:hover {
            color: white;
        }
        
        .copyright {
            text-align: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid var(--border);
            color: var(--text-light);
            font-size: 14px;
        }
        
        body.liquid-glass .copyright {
            color: rgba(255, 255, 255, 0.7);
            border-top: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background: white;
            border-radius: 12px;
            padding: 30px;
            width: 90%;
            max-width: 800px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            max-height: 90vh;
            overflow-y: auto;
            transition: all 0.5s ease;
        }
        
        body.liquid-glass .modal-content {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(var(--glass-blur));
            -webkit-backdrop-filter: blur(var(--glass-blur));
            box-shadow: var(--glass-shadow);
            border: var(--glass-border);
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .modal-title {
            font-size: 22px;
            color: var(--primary);
        }
        
        body.liquid-glass .modal-title {
            color: white;
        }
        
        .close-modal {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: var(--text-light);
        }
        
        body.liquid-glass .close-modal {
            color: rgba(255, 255, 255, 0.8);
        }
        
        .service-option {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            margin-bottom: 10px;
            border: 1px solid var(--border);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        body.liquid-glass .service-option {
            border: var(--glass-border);
            background: rgba(255, 255, 255, 0.1);
        }
        
        .service-option:hover {
            background: var(--background);
            border-color: var(--primary);
        }
        
        body.liquid-glass .service-option:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: rgba(255, 255, 255, 0.5);
        }
        
        .service-option.selected {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }
        
        body.liquid-glass .service-option.selected {
            background: rgba(255, 255, 255, 0.3);
            border-color: rgba(255, 255, 255, 0.5);
        }
        
        .service-option-icon {
            font-size: 24px;
        }
        
        /* Admin Panel */
        .admin-panel {
            display: none;
        }
        
        .admin-tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid var(--border);
        }
        
        .admin-tab {
            padding: 15px 25px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            position: relative;
            color: var(--text-light);
        }
        
        body.liquid-glass .admin-tab {
            color: rgba(255, 255, 255, 0.7);
        }
        
        .admin-tab.active {
            color: var(--primary);
        }
        
        body.liquid-glass .admin-tab.active {
            color: white;
        }
        
        .admin-tab.active::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 0;
            width: 100%;
            height: 3px;
            background: var(--primary);
        }
        
        body.liquid-glass .admin-tab.active::after {
            background: white;
        }
        
        .admin-content {
            display: none;
        }
        
        .admin-content.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        .admin-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        
        .admin-table th,
        .admin-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }
        
        body.liquid-glass .admin-table th,
        body.liquid-glass .admin-table td {
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
        }
        
        .admin-table th {
            background: var(--background);
            font-weight: 600;
            color: var(--primary);
        }
        
        body.liquid-glass .admin-table th {
            background: rgba(255, 255, 255, 0.1);
            color: white;
        }
        
        .admin-table tr:hover {
            background: var(--background);
        }
        
        body.liquid-glass .admin-table tr:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        
        .action-buttons {
            display: flex;
            gap: 8px;
        }
        
        .action-btn {
            padding: 6px 12px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s ease;
        }
        
        .edit-btn {
            background: var(--primary);
            color: white;
        }
        
        .delete-btn {
            background: var(--error);
            color: white;
        }
        
        .add-btn {
            background: var(--success);
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            margin-bottom: 20px;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: var(--surface);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            border: 1px solid var(--border);
            transition: all 0.5s ease;
        }
        
        body.liquid-glass .stat-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            box-shadow: var(--glass-shadow);
            border: var(--glass-border);
        }
        
        .stat-value {
            font-size: 32px;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 5px;
        }
        
        body.liquid-glass .stat-value {
            color: white;
        }
        
        .stat-label {
            font-size: 14px;
            color: var(--text-light);
        }
        
        body.liquid-glass .stat-label {
            color: rgba(255, 255, 255, 0.8);
        }
        
        /* Responsive */
        @media (max-width: 992px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .footer-content {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .admin-tabs {
                flex-wrap: wrap;
            }
        }
        
        @media (max-width: 576px) {
            .header-content {
                flex-direction: column;
                gap: 15px;
            }
            
            .auth-box {
                padding: 20px;
            }
            
            .services-grid {
                grid-template-columns: 1fr;
            }
            
            .admin-table {
                font-size: 14px;
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .theme-toggle {
                margin-top: 10px;
            }
        }
        
        /* Предупреждение для слабых устройств */
        .performance-warning {
            display: none;
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--warning);
            color: white;
            padding: 10px 15px;
            border-radius: 8px;
            font-size: 14px;
            z-index: 3000;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            max-width: 300px;
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <div class="logo-icon">
                        <img src="ZT.jpg" alt="МВД Логотип">
                    </div>
                    <div class="logo-text">
                        <h1>МВДУслуги</h1>
                        <p>Официальный портал клана МВД</p>
                    </div>
                </div>
                <div class="user-menu">
                    <div class="theme-toggle">
                        <span class="toggle-label">Flat</span>
                        <label class="toggle-switch">
                            <input type="checkbox" id="themeToggle">
                            <span class="toggle-slider"></span>
                        </label>
                        <span class="toggle-label">Liquid Glass</span>
                    </div>
                    <div class="user-info" id="userInfo" style="display: none;">
                        <i class="fas fa-user"></i> <span id="currentUsername">Пользователь</span>
                    </div>
                    <button class="btn" id="loginBtn"><i class="fas fa-user"></i> Войти</button>
                    <button class="btn btn-primary" id="registerBtn"><i class="fas fa-user-plus"></i> Регистрация</button>
                    <button class="btn btn-warning" id="adminBtn" style="display: none;"><i class="fas fa-cog"></i> Админка</button>
                    <button class="btn btn-danger" id="logoutBtn" style="display: none;"><i class="fas fa-sign-out-alt"></i> Выйти</button>
                </div>
            </div>
        </div>
    </header>
    
    <div class="container">
        <!-- Auth Forms -->
        <div class="auth-container" id="authContainer">
            <div class="auth-box">
                <div class="auth-tabs">
                    <div class="auth-tab active" data-tab="login">ВХОД</div>
                    <div class="auth-tab" data-tab="register">РЕГИСТРАЦИЯ</div>
                </div>
                
                <div class="auth-form active" id="loginForm">
                    <form id="loginFormElement">
                        <div class="form-group">
                            <label class="form-label" for="loginUsername">Игровой никнейм</label>
                            <input type="text" class="form-input" id="loginUsername" required placeholder="Введите ваш никнейм">
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="loginPassword">Пароль</label>
                            <input type="password" class="form-input" id="loginPassword" required placeholder="Введите пароль">
                        </div>
                        <button type="submit" class="form-submit">ВОЙТИ В СИСТЕМУ</button>
                    </form>
                    <div class="form-footer">
                        <a href="#" id="forgotPassword">Забыли пароль?</a>
                    </div>
                </div>
                
                <div class="auth-form" id="registerForm">
                    <form id="registerFormElement">
                        <div class="form-group">
                            <label class="form-label" for="registerName">Игровой никнейм</label>
                            <input type="text" class="form-input" id="registerName" required placeholder="Введите ваш никнейм">
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="registerTelegram">Telegram username</label>
                            <input type="text" class="form-input" id="registerTelegram" required placeholder="@username (без @)">
                            <small style="color: var(--text-light); margin-top: 5px; display: block;">
                                На этот username будет отправлен код подтверждения
                            </small>
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="registerRank">Уровень/Звание</label>
                            <input type="text" class="form-input" id="registerRank" required placeholder="Например: Генерал-майор">
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="registerPassword">Пароль</label>
                            <input type="password" class="form-input" id="registerPassword" required placeholder="Придумайте пароль">
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="registerConfirmPassword">Подтвердите пароль</label>
                            <input type="password" class="form-input" id="registerConfirmPassword" required placeholder="Повторите пароль">
                        </div>
                        <button type="submit" class="form-submit" id="registerSubmitBtn">ПОДАТЬ ЗАЯВКУ В КЛАН</button>
                    </form>
                </div>
                
                <!-- Форма верификации -->
                <div class="verification-form" id="verificationForm">
                    <div class="verification-info">
                        <i class="fas fa-shield-alt"></i>
                        <strong>Верификация Telegram</strong>
                        <p>Код отправлен на <span id="verificationUsername"></span></p>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Введите 6-значный код</label>
                        <div class="verification-code">
                            <input type="text" class="code-input" maxlength="1" data-index="0">
                            <input type="text" class="code-input" maxlength="1" data-index="1">
                            <input type="text" class="code-input" maxlength="1" data-index="2">
                            <input type="text" class="code-input" maxlength="1" data-index="3">
                            <input type="text" class="code-input" maxlength="1" data-index="4">
                            <input type="text" class="code-input" maxlength="1" data-index="5">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <button type="button" class="form-submit" id="verifyCodeBtn">ПОДТВЕРДИТЬ КОД</button>
                    </div>
                    
                    <div class="form-footer">
                        <p>Не получили код? 
                            <span class="timer" id="resendTimer">60</span> сек
                            <span class="resend-link" id="resendCode" style="display: none;">Отправить снова</span>
                        </p>
                    </div>
                </div>
                
                <div class="loading" id="loadingMessage">
                    <div class="loading-spinner"></div>
                    <h2>Отправка заявки...</h2>
                    <p>Отправляем заявку администраторам...</p>
                </div>
                
                <div class="success-message" id="successMessage">
                    <div class="success-icon">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <h2>Заявка отправлена!</h2>
                    <p>Ваша заявка отправлена администраторам. Ожидайте ответа в Telegram.</p>
                </div>
            </div>
        </div>
        
        <!-- Main Content (shown after auth) -->
        <div class="main-content" id="mainContent">
            <aside class="sidebar">
                <h2>УСЛУГИ КЛАНА</h2>
                <ul>
                    <li><a href="#" id="clanMembersBtn"><i class="fas fa-users"></i> Состав клана</a></li>
                    <li><a href="#" id="achievementsBtn"><i class="fas fa-trophy"></i> Достижения</a></li>
                    <li><a href="#" id="eventsBtn"><i class="fas fa-calendar"></i> Расписание ивентов</a></li>
                    <li><a href="#" id="protectionBtn"><i class="fas fa-shield-alt"></i> Защита территории</a></li>
                    <li><a href="#" id="resourcesBtn"><i class="fas fa-gem"></i> Ресурсы клана</a></li>
                    <li><a href="#" id="chatBtn"><i class="fas fa-comments"></i> Клановый чат</a></li>
                    <li><a href="#" id="settingsBtn"><i class="fas fa-cog"></i> Настройки</a></li>
                </ul>
                
                <h2 style="margin-top: 30px;">БЫСТРЫЕ ДЕЙСТВИЯ</h2>
                <ul>
                    <li><a href="#" id="servicesBtn"><i class="fas fa-handshake"></i> Заказать услугу</a></li>
                    <li><a href="#" id="inviteBtn"><i class="fas fa-user-friends"></i> Пригласить друга</a></li>
                    <li><a href="#" id="donationBtn"><i class="fas fa-donate"></i> Сделать взнос</a></li>
                    <li><a href="#" id="helpBtn"><i class="fas fa-question-circle"></i> Помощь</a></li>
                </ul>
            </aside>
            
            <main class="content">
                <section class="status-panel">
                    <div class="status-header">
                        <h2>ПАНЕЛЬ УПРАВЛЕНИЯ КЛАНОМ МВД</h2>
                        <div class="status-indicator">
                            <div class="status-dot"></div>
                            <div class="status-text">СИСТЕМА АКТИВНА</div>
                        </div>
                    </div>
                    <p>Добро пожаловать в официальную систему клана МВД в Build logic. Здесь вы можете управлять клановыми делами, просматривать расписание ивентов и взаимодействовать с участниками.</p>
                    
                    <div class="services-grid">
                        <div class="service-card">
                            <div class="service-icon"><i class="fas fa-users"></i></div>
                            <h3>Состав клана</h3>
                            <p>Просмотр списка участников, их рангов и активности в Build logic</p>
                            <button class="btn" style="width: 100%; margin-top: 10px;" id="clanMembersBtn2">Открыть</button>
                        </div>
                        
                        <div class="service-card">
                            <div class="service-icon"><i class="fas fa-calendar-check"></i></div>
                            <h3>Ивенты Build logic</h3>
                            <p>Расписание клановых мероприятий и рейдов в игре</p>
                            <button class="btn" style="width: 100%; margin-top: 10px;" id="eventsBtn2">Посмотреть</button>
                        </div>
                        
                        <div class="service-card">
                            <div class="service-icon"><i class="fas fa-warehouse"></i></div>
                            <h3>Клановое хранилище</h3>
                            <p>Управление общими ресурсами и предметами в Build logic</p>
                            <button class="btn" style="width: 100%; margin-top: 10px;" id="warehouseBtn">Доступно</button>
                        </div>
                    </div>
                </section>
            </main>
        </div>
        
        <!-- Admin Panel -->
        <div class="admin-panel" id="adminPanel">
            <div class="status-panel">
                <div class="status-header">
                    <h2>АДМИНИСТРАТИВНАЯ ПАНЕЛЬ КЛАНА МВД</h2>
                    <div class="status-indicator">
                        <div class="status-dot"></div>
                        <div class="status-text">РЕЖИМ АДМИНИСТРАТОРА</div>
                    </div>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value" id="totalMembers">24</div>
                        <div class="stat-label">Участников клана</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="activeEvents">3</div>
                        <div class="stat-label">Активных ивентов</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="warehouseItems">156</div>
                        <div class="stat-label">Предметов на складе</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="pendingRequests">5</div>
                        <div class="stat-label">Заявок на рассмотрении</div>
                    </div>
                </div>
                
                <div class="admin-tabs">
                    <div class="admin-tab active" data-tab="members">Управление составом</div>
                    <div class="admin-tab" data-tab="events">Управление ивентами</div>
                    <div class="admin-tab" data-tab="warehouse">Управление складом</div>
                    <div class="admin-tab" data-tab="requests">Заявки на вступление</div>
                </div>
                
                <!-- Members Management -->
                <div class="admin-content active" id="membersContent">
                    <button class="add-btn" id="addMemberBtn"><i class="fas fa-plus"></i> Добавить участника</button>
                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Никнейм</th>
                                <th>Telegram</th>
                                <th>Звание</th>
                                <th>Статус</th>
                                <th>Действия</th>
                            </tr>
                        </thead>
                        <tbody id="membersTable">
                            <!-- Данные будут заполнены через JavaScript -->
                        </tbody>
                    </table>
                </div>
                
                <!-- Events Management -->
                <div class="admin-content" id="eventsContent">
                    <button class="add-btn" id="addEventBtn"><i class="fas fa-plus"></i> Создать ивент</button>
                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Название</th>
                                <th>Дата</th>
                                <th>Участники</th>
                                <th>Статус</th>
                                <th>Действия</th>
                            </tr>
                        </thead>
                        <tbody id="eventsTable">
                            <!-- Данные будут заполнены через JavaScript -->
                        </tbody>
                    </table>
                </div>
                
                <!-- Warehouse Management -->
                <div class="admin-content" id="warehouseContent">
                    <button class="add-btn" id="addItemBtn"><i class="fas fa-plus"></i> Добавить предмет</button>
                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Название</th>
                                <th>Количество</th>
                                <th>Категория</th>
                                <th>Последнее обновление</th>
                                <th>Действия</th>
                            </tr>
                        </thead>
                        <tbody id="warehouseTable">
                            <!-- Данные будут заполнены через JavaScript -->
                        </tbody>
                    </table>
                </div>
                
                <!-- Requests Management -->
                <div class="admin-content" id="requestsContent">
                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Никнейм</th>
                                <th>Telegram</th>
                                <th>Звание</th>
                                <th>Дата заявки</th>
                                <th>Действия</th>
                            </tr>
                        </thead>
                        <tbody id="requestsTable">
                            <!-- Данные будут заполнены через JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modal for services -->
    <div class="modal" id="servicesModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Заказ услуги</h2>
                <button class="close-modal" id="closeServicesModal">&times;</button>
            </div>
            <div class="form-group">
                <label class="form-label" for="serviceUsername">Ваш Telegram username</label>
                <input type="text" class="form-input" id="serviceUsername" placeholder="@username (без @)" value="">
            </div>
            <div class="form-group">
                <label class="form-label">Выберите услугу (@mvd_general_RF)</label>
                <div class="service-option" data-service="protection" data-provider="@mvd_general_RF">
                    <div class="service-option-icon"><i class="fas fa-shield-alt"></i></div>
                    <div>
                        <h4>Защита терры</h4>
                        <p>Организация защиты вашей базы от рейдов</p>
                    </div>
                </div>
                <div class="service-option" data-service="resources" data-provider="@mvd_general_RF">
                    <div class="service-option-icon"><i class="fas fa-gem"></i></div>
                    <div>
                        <h4>Поиск ресурсов</h4>
                        <p>Помощь в поиске редких ресурсов</p>
                    </div>
                </div>
                <div class="service-option" data-service="project_help" data-provider="@mvd_general_RF">
                    <div class="service-option-icon"><i class="fas fa-project-diagram"></i></div>
                    <div>
                        <h4>Помощь в проекте</h4>
                        <p>Консультации по разработке проектов</p>
                    </div>
                </div>
                <div class="service-option" data-service="kolbasa" data-provider="@mvd_general_RF">
                    <div class="service-option-icon"><i class="fas fa-drumstick-bite"></i></div>
                    <div>
                        <h4>Колбаса</h4>
                        <p>Специальная услуга от @mvd_general_RF</p>
                    </div>
                </div>
                
                <label class="form-label" style="margin-top: 20px;">Выберите услугу (@mes_generall)</label>
                <div class="service-option" data-service="bot_creation" data-provider="@mes_generall">
                    <div class="service-option-icon"><i class="fas fa-robot"></i></div>
                    <div>
                        <h4>Создание ботов</h4>
                        <p>Разработка Telegram и других ботов</p>
                    </div>
                </div>
                <div class="service-option" data-service="linux_help" data-provider="@mes_generall">
                    <div class="service-option-icon"><i class="fab fa-linux"></i></div>
                    <div>
                        <h4>Помощь в линуксе</h4>
                        <p>Настройка и администрирование Linux</p>
                    </div>
                </div>
                <div class="service-option" data-service="building_tips" data-provider="@mes_generall">
                    <div class="service-option-icon"><i class="fas fa-paint-roller"></i></div>
                    <div>
                        <h4>Уроки строительства</h4>
                        <p>Как красиво строить в играх</p>
                    </div>
                </div>
                <div class="service-option" data-service="scene_creation" data-provider="@mes_generall">
                    <div class="service-option-icon"><i class="fas fa-film"></i></div>
                    <div>
                        <h4>Создание сцен</h4>
                        <p>Как сделать качественные сцены</p>
                    </div>
                </div>
                <div class="service-option" data-service="pvp_training" data-provider="@mes_generall">
                    <div class="service-option-icon"><i class="fas fa-fist-raised"></i></div>
                    <div>
                        <h4>Обучение по PvP</h4>
                        <p>Индивидуальные тренировки по PvP</p>
                    </div>
                </div>
            </div>
            <button class="form-submit" id="sendServiceRequest">Отправить заявку</button>
        </div>
    </div>
    
    <!-- Modal for admin actions -->
    <div class="modal" id="adminModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="adminModalTitle">Добавить участника</h2>
                <button class="close-modal" id="closeAdminModal">&times;</button>
            </div>
            <div id="adminModalContent">
                <!-- Контент будет заполнен через JavaScript -->
            </div>
        </div>
    </div>
    
    <!-- Modal for donation -->
    <div class="modal" id="donationModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Сделать взнос в клан</h2>
                <button class="close-modal" id="closeDonationModal">&times;</button>
            </div>
            <div class="form-group">
                <label class="form-label">Выберите способ оплаты</label>
                <div class="service-option" data-payment="qiwi">
                    <div class="service-option-icon"><i class="fas fa-wallet"></i></div>
                    <div>
                        <h4>QIWI Кошелек</h4>
                        <p>Оплата через QIWI кошелек</p>
                    </div>
                </div>
                <div class="service-option" data-payment="card">
                    <div class="service-option-icon"><i class="fas fa-credit-card"></i></div>
                    <div>
                        <h4>Банковская карта</h4>
                        <p>Оплата картой Visa/Mastercard</p>
                    </div>
                </div>
                <div class="service-option" data-payment="crypto">
                    <div class="service-option-icon"><i class="fab fa-bitcoin"></i></div>
                    <div>
                        <h4>Криптовалюта</h4>
                        <p>Оплата Bitcoin, USDT и другими криптовалютами</p>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label class="form-label" for="donationAmount">Сумма взноса (руб.)</label>
                <input type="number" class="form-input" id="donationAmount" placeholder="Введите сумму">
            </div>
            <div class="form-group">
                <label class="form-label" for="donationMessage">Комментарий к взносу (необязательно)</label>
                <textarea class="form-input" id="donationMessage" placeholder="Например: На развитие клана"></textarea>
            </div>
            <button class="form-submit" id="processDonation">Перейти к оплате</button>
        </div>
    </div>
    
    <!-- Modal for clan members -->
    <div class="modal" id="clanMembersModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Состав клана МВД</h2>
                <button class="close-modal" id="closeClanMembersModal">&times;</button>
            </div>
            <div class="form-group">
                <table class="admin-table">
                    <thead>
                        <tr>
                            <th>Никнейм</th>
                            <th>Telegram</th>
                            <th>Звание</th>
                            <th>Статус</th>
                            <th>Действия</th>
                        </tr>
                    </thead>
                    <tbody id="clanMembersTable">
                        <!-- Данные будут заполнены через JavaScript -->
                    </tbody>
                </table>
            </div>
            <div class="form-footer">
                <p>Всего участников: <strong id="totalMembersCount">24</strong> | Активных: <strong id="activeMembersCount">18</strong></p>
            </div>
        </div>
    </div>
    
    <!-- Modal for events -->
    <div class="modal" id="eventsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Расписание ивентов</h2>
                <button class="close-modal" id="closeEventsModal">&times;</button>
            </div>
            <div class="form-group">
                <table class="admin-table">
                    <thead>
                        <tr>
                            <th>Название</th>
                            <th>Дата</th>
                            <th>Участники</th>
                            <th>Статус</th>
                            <th>Действия</th>
                        </tr>
                    </thead>
                    <tbody id="eventsListTable">
                        <!-- Данные будут заполнены через JavaScript -->
                    </tbody>
                </table>
            </div>
            <div class="form-footer">
                <p>Всего ивентов: <strong id="totalEventsCount">3</strong> | Активных: <strong id="activeEventsCount">2</strong></p>
            </div>
        </div>
    </div>
    
    <!-- Modal for warehouse -->
    <div class="modal" id="warehouseModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Клановое хранилище</h2>
                <button class="close-modal" id="closeWarehouseModal">&times;</button>
            </div>
            <div class="form-group">
                <table class="admin-table">
                    <thead>
                        <tr>
                            <th>Название</th>
                            <th>Количество</th>
                            <th>Категория</th>
                            <th>Последнее обновление</th>
                            <th>Действия</th>
                        </tr>
                    </thead>
                    <tbody id="warehouseListTable">
                        <!-- Данные будут заполнены через JavaScript -->
                    </tbody>
                </table>
            </div>
            <div class="form-footer">
                <p>Всего предметов: <strong id="totalItemsCount">156</strong></p>
            </div>
        </div>
    </div>
    
    <!-- Предупреждение о производительности -->
    <div class="performance-warning" id="performanceWarning">
        <i class="fas fa-exclamation-triangle"></i> Liquid Glass режим может замедлить работу на вашем устройстве
    </div>
    
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Клан МВД</h3>
                    <p>Сильнейшее игровое сообщество в Build logic. Профессионализм, дисциплина, победа!</p>
                </div>
                
                <div class="footer-section">
                    <h3>КОНТАКТЫ</h3>
                    <ul>
                        <li><i class="fas fa-gamepad"></i> Игра: Build logic</li>
                        <li><i class="fab fa-telegram"></i> Telegram: @mvd_general_RF</li>
                        <li><i class="fas fa-phone"></i> Телефон: +7 913 859 06-62</li>
                        <li><i class="fas fa-envelope"></i> Email: mvd.general.rf@gmail.com</li>
                        <li><i class="fas fa-crown"></i> Лидер: mvd</li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h3>ПОМОЩЬ</h3>
                    <ul>
                        <li><a href="#" id="rulesBtn"><i class="fas fa-book"></i> Правила клана</a></li>
                        <li><a href="#" id="supportBtn"><i class="fas fa-headset"></i> Техподдержка</a></li>
                        <li><a href="#" id="reportBtn"><i class="fas fa-exclamation-triangle"></i> Сообщить о проблеме</a></li>
                    </ul>
                </div>
            </div>
            
            <div class="copyright">
                <p>© 2024 Клан МВД | Build logic | Все права защищены</p>
            </div>
        </div>
    </footer>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Telegram bot configuration
            const TELEGRAM_BOT_TOKEN = '8249371074:AAHrRtSF-smyiQrQz4zTxrHW38UtRwVLsNU';
            const BOT_USERNAME = '@MVD_Clan_Bot';
            
            // Глобальные переменные для верификации
            let currentVerificationData = null;
            let verificationTimer = null;
            let selectedService = null;
            let selectedServiceProvider = null;
            let currentUser = null;
            let isAdmin = false;
            
            // Mock data for admin panel
            let mockData;
            
            // Глобальные переменные для работы с модальными окнами
            let currentModalType = null;
            let currentEditId = null;
    
            // Elements
            const authContainer = document.getElementById('authContainer');
            const mainContent = document.getElementById('mainContent');
            const adminPanel = document.getElementById('adminPanel');
            const loginBtn = document.getElementById('loginBtn');
            const registerBtn = document.getElementById('registerBtn');
            const adminBtn = document.getElementById('adminBtn');
            const logoutBtn = document.getElementById('logoutBtn');
            const userInfo = document.getElementById('userInfo');
            const currentUsername = document.getElementById('currentUsername');
            const authTabs = document.querySelectorAll('.auth-tab');
            const authForms = document.querySelectorAll('.auth-form');
            const loginForm = document.getElementById('loginForm');
            const registerForm = document.getElementById('registerForm');
            const verificationForm = document.getElementById('verificationForm');
            const successMessage = document.getElementById('successMessage');
            const loadingMessage = document.getElementById('loadingMessage');
            const servicesBtn = document.getElementById('servicesBtn');
            const servicesModal = document.getElementById('servicesModal');
            const closeServicesModal = document.getElementById('closeServicesModal');
            const sendServiceRequest = document.getElementById('sendServiceRequest');
            const serviceOptions = document.querySelectorAll('.service-option');
            const adminTabs = document.querySelectorAll('.admin-tab');
            const adminContents = document.querySelectorAll('.admin-content');
            const adminModal = document.getElementById('adminModal');
            const closeAdminModal = document.getElementById('closeAdminModal');
            const adminModalTitle = document.getElementById('adminModalTitle');
            const adminModalContent = document.getElementById('adminModalContent');
            const themeToggle = document.getElementById('themeToggle');
            const performanceWarning = document.getElementById('performanceWarning');
            const donationBtn = document.getElementById('donationBtn');
            const donationModal = document.getElementById('donationModal');
            const closeDonationModal = document.getElementById('closeDonationModal');
            const processDonation = document.getElementById('processDonation');
            const clanMembersBtn = document.getElementById('clanMembersBtn');
            const clanMembersBtn2 = document.getElementById('clanMembersBtn2');
            const clanMembersModal = document.getElementById('clanMembersModal');
            const closeClanMembersModal = document.getElementById('closeClanMembersModal');
            const clanMembersTable = document.getElementById('clanMembersTable');
            const eventsBtn = document.getElementById('eventsBtn');
            const eventsBtn2 = document.getElementById('eventsBtn2');
            const eventsModal = document.getElementById('eventsModal');
            const closeEventsModal = document.getElementById('closeEventsModal');
            const eventsListTable = document.getElementById('eventsListTable');
            const warehouseBtn = document.getElementById('warehouseBtn');
            const warehouseModal = document.getElementById('warehouseModal');
            const closeWarehouseModal = document.getElementById('closeWarehouseModal');
            const warehouseListTable = document.getElementById('warehouseListTable');
            const backToMain = document.getElementById('backToMain');
            const verificationUsername = document.getElementById('verificationUsername');
            const verifyCodeBtn = document.getElementById('verifyCodeBtn');
            const resendTimer = document.getElementById('resendTimer');
            const resendCode = document.getElementById('resendCode');
            const codeInputs = document.querySelectorAll('.code-input');
            const registerSubmitBtn = document.getElementById('registerSubmitBtn');
            const serviceUsernameInput = document.getElementById('serviceUsername');
    
            // ID администраторов
            const ADMIN_CHAT_IDS = {
                'mvd_general_RF': '6064583804',
                'mes_generall': '1988845162'
            };
            
            // Список администраторов (имена пользователей)
            const ADMIN_USERS = [
                'mes_generall', '@mes_generall',
                'mvd_general_rf', '@mvd_general_rf', 
                'kazuha', '@kazuha',
                'mvd', '@mvd'
            ];
    
            // Load data from localStorage
            function loadData() {
                try {
                    const savedData = localStorage.getItem('clanMVDData');
                    console.log('🔍 Проверка localStorage:', savedData);
                    
                    if (savedData && savedData !== 'null' && savedData !== 'undefined') {
                        const data = JSON.parse(savedData);
                        console.log('📥 Данные загружены из localStorage:', data);
                        
                        return {
                            members: Array.isArray(data.members) ? data.members : [],
                            events: Array.isArray(data.events) ? data.events : [],
                            warehouse: Array.isArray(data.warehouse) ? data.warehouse : [],
                            requests: Array.isArray(data.requests) ? data.requests : [],
                            users: Array.isArray(data.users) ? data.users : [],
                            services: Array.isArray(data.services) ? data.services : []
                        };
                    } else {
                        console.log('📝 Созданы пустые данные по умолчанию');
                        return getDefaultData();
                    }
                } catch (error) {
                    console.error('❌ Ошибка загрузки данных:', error);
                    return getDefaultData();
                }
            }
            
            // Get default data
            function getDefaultData() {
                return {
                    members: [],
                    events: [],
                    warehouse: [],
                    requests: [],
                    users: [],
                    services: []
                };
            }
            
            // Save data to localStorage
            function saveData() {
                try {
                    if (!mockData) {
                        console.error('❌ mockData не определен');
                        mockData = getDefaultData();
                    }
                    
                    mockData.members = Array.isArray(mockData.members) ? mockData.members : [];
                    mockData.events = Array.isArray(mockData.events) ? mockData.events : [];
                    mockData.warehouse = Array.isArray(mockData.warehouse) ? mockData.warehouse : [];
                    mockData.requests = Array.isArray(mockData.requests) ? mockData.requests : [];
                    mockData.users = Array.isArray(mockData.users) ? mockData.users : [];
                    mockData.services = Array.isArray(mockData.services) ? mockData.services : [];
                    
                    localStorage.setItem('clanMVDData', JSON.stringify(mockData));
                    console.log('💾 Данные сохранены в localStorage:', mockData);
                    return true;
                } catch (error) {
                    console.error('❌ Ошибка сохранения данных:', error);
                    return false;
                }
            }
            
            // Инициализация данных при загрузке
            function initializeData() {
                mockData = loadData();
                console.log('🎯 Данные инициализированы:', mockData);
                
                if (!mockData.members) mockData.members = [];
                if (!mockData.events) mockData.events = [];
                if (!mockData.warehouse) mockData.warehouse = [];
                if (!mockData.requests) mockData.requests = [];
                if (!mockData.users) mockData.users = [];
                if (!mockData.services) mockData.services = [];
                
                saveData();
            }
    
            // Update UI based on authentication state
            function updateUI() {
                if (currentUser) {
                    // User is logged in
                    if (loginBtn) loginBtn.style.display = 'none';
                    if (registerBtn) registerBtn.style.display = 'none';
                    if (userInfo) userInfo.style.display = 'flex';
                    if (logoutBtn) logoutBtn.style.display = 'block';
                    if (currentUsername) currentUsername.textContent = currentUser;
                    
                    if (isAdmin) {
                        if (adminBtn) adminBtn.style.display = 'block';
                        console.log('✅ Пользователь является администратором:', currentUser);
                    } else {
                        if (adminBtn) adminBtn.style.display = 'none';
                        console.log('❌ Пользователь не является администратором:', currentUser);
                    }
                    
                    if (authContainer) authContainer.style.display = 'none';
                    if (mainContent) mainContent.style.display = 'grid';
                    
                    // Заполняем поле username в форме услуг
                    if (serviceUsernameInput) {
                        const user = mockData.users.find(u => u.username === currentUser);
                        if (user && user.telegram) {
                            serviceUsernameInput.value = user.telegram.replace('@', '');
                        }
                    }
                } else {
                    // User is not logged in
                    if (loginBtn) loginBtn.style.display = 'block';
                    if (registerBtn) registerBtn.style.display = 'block';
                    if (userInfo) userInfo.style.display = 'none';
                    if (logoutBtn) logoutBtn.style.display = 'none';
                    if (adminBtn) adminBtn.style.display = 'none';
                    
                    if (authContainer) authContainer.style.display = 'flex';
                    if (mainContent) mainContent.style.display = 'none';
                    if (adminPanel) adminPanel.style.display = 'none';
                }
            }
            
            // Check if user is admin
            function checkAdmin(username) {
                const normalizedUsername = username.toLowerCase().trim();
                const isAdminUser = ADMIN_USERS.some(admin => 
                    admin.toLowerCase() === normalizedUsername
                );
                
                return isAdminUser;
            }
    
            // ==================== ВЕРИФИКАЦИЯ ====================
    
            // Генерация случайного кода
            function generateVerificationCode() {
                return Math.floor(100000 + Math.random() * 900000).toString();
            }
    
            // Функция отправки сообщения через Telegram Bot API
            async function sendTelegramMessage(chatId, message) {
                try {
                    const url = `https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage`;
                    
                    const response = await fetch(url, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            chat_id: chatId,
                            text: message,
                            parse_mode: 'HTML'
                        })
                    });
    
                    const result = await response.json();
                    
                    if (result.ok) {
                        console.log('✅ Сообщение отправлено в Telegram');
                        return true;
                    } else {
                        console.error('❌ Ошибка отправки в Telegram:', result);
                        return false;
                    }
                } catch (error) {
                    console.error('❌ Ошибка сети:', error);
                    return false;
                }
            }
    
            // Получение chat_id по username
            async function getChatIdByUsername(username) {
                try {
                    // Сначала пробуем отправить сообщение чтобы получить chat_id
                    const testMessage = "🔐 Код верификации для клана МВД будет отправлен в следующем сообщении...";
                    const url = `https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage`;
                    
                    const response = await fetch(url, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            chat_id: username,
                            text: testMessage
                        })
                    });
    
                    const result = await response.json();
                    
                    if (result.ok) {
                        return result.result.chat.id;
                    } else {
                        console.error('❌ Не удалось найти пользователя:', username);
                        return null;
                    }
                } catch (error) {
                    console.error('❌ Ошибка поиска пользователя:', error);
                    return null;
                }
            }
    
            // Отправка кода верификации через Telegram бота
            async function sendVerificationCode(telegramUsername, code) {
                try {
                    console.log(`📤 Отправка кода ${code} пользователю ${telegramUsername}`);
                    
                    const cleanUsername = telegramUsername.startsWith('@') ? telegramUsername : `@${telegramUsername}`;
                    const message = `🔐 <b>Код верификации для клана МВД</b>\n\nВаш код: <code>${code}</code>\n\nИспользуйте этот код для завершения регистрации на портале клана МВД.\n\n⏰ Код действителен 10 минут.`;
                    
                    // Пытаемся отправить сообщение напрямую по username
                    const sent = await sendTelegramMessage(cleanUsername, message);
                    
                    if (sent) {
                        console.log(`✅ Код отправлен в Telegram: ${cleanUsername}`);
                        return true;
                    } else {
                        console.log(`❌ Не удалось отправить по username, пробуем через chat_id...`);
                        
                        // Если не получилось по username, пробуем получить chat_id
                        const chatId = await getChatIdByUsername(cleanUsername);
                        if (chatId) {
                            const sentById = await sendTelegramMessage(chatId, message);
                            if (sentById) {
                                console.log(`✅ Код отправлен по chat_id: ${chatId}`);
                                return true;
                            }
                        }
                        
                        return false;
                    }
                } catch (error) {
                    console.error('❌ Ошибка отправки кода:', error);
                    return false;
                }
            }
    
            // Запуск таймера для повторной отправки кода
            function startResendTimer() {
                let timeLeft = 60;
                resendTimer.textContent = timeLeft;
                resendCode.style.display = 'none';
                
                verificationTimer = setInterval(() => {
                    timeLeft--;
                    resendTimer.textContent = timeLeft;
                    
                    if (timeLeft <= 0) {
                        clearInterval(verificationTimer);
                        resendCode.style.display = 'inline';
                    }
                }, 1000);
            }
    
            // Обработка отправки формы регистрации
            if (registerForm) {
                registerForm.addEventListener('submit', async (e) => {
                    e.preventDefault();
                    
                    const nickname = document.getElementById('registerName').value.trim();
                    const telegram = document.getElementById('registerTelegram').value.trim();
                    const rank = document.getElementById('registerRank').value.trim();
                    const password = document.getElementById('registerPassword').value;
                    const confirmPassword = document.getElementById('registerConfirmPassword').value;
                    
                    if (!nickname || !telegram || !rank || !password || !confirmPassword) {
                        alert('Пожалуйста, заполните все поля!');
                        return;
                    }
                    
                    if (password !== confirmPassword) {
                        alert('Пароли не совпадают!');
                        return;
                    }
                    
                    if (password.length < 6) {
                        alert('Пароль должен содержать минимум 6 символов!');
                        return;
                    }
                    
                    // Проверяем, не занят ли никнейм
                    const existingUser = mockData.users.find(user => user.username === nickname);
                    if (existingUser) {
                        alert('Этот никнейм уже занят!');
                        return;
                    }
                    
                    // Показываем загрузку
                    if (loadingMessage) loadingMessage.style.display = 'block';
                    if (registerSubmitBtn) registerSubmitBtn.disabled = true;
                    
                    // Генерируем код верификации
                    const verificationCode = generateVerificationCode();
                    
                    // Сохраняем данные для верификации
                    currentVerificationData = {
                        nickname,
                        telegram: telegram.startsWith('@') ? telegram : '@' + telegram,
                        rank,
                        password,
                        verificationCode,
                        timestamp: Date.now()
                    };
                    
                    // Отправляем код
                    const sent = await sendVerificationCode(currentVerificationData.telegram, verificationCode);
                    
                    // Скрываем загрузку
                    if (loadingMessage) loadingMessage.style.display = 'none';
                    if (registerSubmitBtn) registerSubmitBtn.disabled = false;
                    
                    if (sent) {
                        // Показываем форму верификации
                        registerForm.style.display = 'none';
                        verificationForm.style.display = 'block';
                        verificationForm.classList.add('active');
                        verificationUsername.textContent = currentVerificationData.telegram;
                        
                        startResendTimer();
                        alert('✅ Код верификации отправлен в Telegram! Проверьте ваши сообщения.');
                    } else {
                        alert('❌ Ошибка отправки кода. Пожалуйста, проверьте правильность Telegram username и убедитесь, что вы начали диалог с ботом @MVD_Clan_Bot');
                    }
                });
            }
    
            // Обработка ввода кода верификации
            codeInputs.forEach((input, index) => {
                input.addEventListener('input', (e) => {
                    const value = e.target.value;
                    
                    // Разрешаем только цифры
                    if (!/^\d*$/.test(value)) {
                        e.target.value = value.replace(/\D/g, '');
                        return;
                    }
                    
                    if (value.length === 1 && index < codeInputs.length - 1) {
                        codeInputs[index + 1].focus();
                    }
                    
                    // Автоподтверждение при заполнении всех полей
                    const allFilled = Array.from(codeInputs).every(input => input.value.length === 1);
                    if (allFilled) {
                        verifyCode();
                    }
                });
                
                input.addEventListener('keydown', (e) => {
                    if (e.key === 'Backspace' && !e.target.value && index > 0) {
                        codeInputs[index - 1].focus();
                    }
                });
            });
    
            // Функция проверки кода
            function verifyCode() {
                const enteredCode = Array.from(codeInputs)
                    .map(input => input.value)
                    .join('');
                
                if (enteredCode.length !== 6) {
                    alert('Пожалуйста, введите полный 6-значный код!');
                    return;
                }
                
                if (!currentVerificationData) {
                    alert('Ошибка верификации. Пожалуйста, начните регистрацию заново.');
                    return;
                }
                
                // Проверяем код и время (10 минут)
                const isExpired = Date.now() - currentVerificationData.timestamp > 10 * 60 * 1000;
                
                if (isExpired) {
                    alert('Код верификации истек. Пожалуйста, запросите новый код.');
                    return;
                }
                
                if (enteredCode === currentVerificationData.verificationCode) {
                    // Код верный - завершаем регистрацию
                    completeRegistration();
                } else {
                    alert('❌ Неверный код верификации! Пожалуйста, проверьте код и попробуйте снова.');
                    // Очищаем поля
                    codeInputs.forEach(input => input.value = '');
                    codeInputs[0].focus();
                }
            }
    
            // Завершение регистрации
            function completeRegistration() {
                if (!currentVerificationData) return;
                
                // Сохраняем пользователя
                const newUser = {
                    id: mockData.users.length + 1,
                    username: currentVerificationData.nickname,
                    telegram: currentVerificationData.telegram,
                    rank: currentVerificationData.rank,
                    password: currentVerificationData.password,
                    isVerified: true,
                    registrationDate: new Date().toISOString()
                };
                
                mockData.users.push(newUser);
                
                // Добавляем заявку в список ожидания
                const newRequest = {
                    id: mockData.requests.length + 1,
                    nickname: currentVerificationData.nickname,
                    telegram: currentVerificationData.telegram,
                    rank: currentVerificationData.rank,
                    date: new Date().toLocaleDateString('ru-RU'),
                    status: 'На рассмотрении'
                };
                
                mockData.requests.push(newRequest);
                
                // Сохраняем данные
                saveData();
                
                // Показываем сообщение об успехе
                verificationForm.style.display = 'none';
                verificationForm.classList.remove('active');
                successMessage.style.display = 'block';
                
                // Отправляем уведомление администраторам
                sendAdminNotification(newRequest);
                
                // Очищаем данные верификации
                currentVerificationData = null;
                clearInterval(verificationTimer);
                
                console.log('✅ Регистрация завершена:', newUser);
                
                // Автоматически входим после регистрации
                setTimeout(() => {
                    currentUser = newUser.username;
                    isAdmin = checkAdmin(newUser.username);
                    updateUI();
                    alert('🎉 Регистрация успешно завершена! Добро пожаловать в клан МВД!');
                }, 2000);
            }
    
            // Отправка уведомления администраторам
            async function sendAdminNotification(request) {
                const message = `📝 <b>Новая заявка в клан!</b>\n\n👤 <b>Никнейм:</b> ${request.nickname}\n📱 <b>Telegram:</b> ${request.telegram}\n⭐ <b>Звание:</b> ${request.rank}\n📅 <b>Дата:</b> ${request.date}\n\n✅ <b>Верификация пройдена успешно!</b>`;
                
                console.log('📤 Уведомление администраторам:', message);
                
                // Отправляем всем администраторам
                const adminPromises = Object.values(ADMIN_CHAT_IDS).map(chatId => 
                    sendTelegramMessage(chatId, message)
                );
                
                await Promise.all(adminPromises);
            }
    
            // Обработчик кнопки подтверждения кода
            if (verifyCodeBtn) {
                verifyCodeBtn.addEventListener('click', verifyCode);
            }
    
            // Обработчик повторной отправки кода
            if (resendCode) {
                resendCode.addEventListener('click', async () => {
                    if (!currentVerificationData) return;
                    
                    // Показываем загрузку
                    resendCode.style.display = 'none';
                    resendTimer.textContent = '60';
                    
                    // Генерируем новый код
                    const newCode = generateVerificationCode();
                    currentVerificationData.verificationCode = newCode;
                    currentVerificationData.timestamp = Date.now();
                    
                    // Отправляем новый код
                    const sent = await sendVerificationCode(currentVerificationData.telegram, newCode);
                    
                    if (sent) {
                        startResendTimer();
                        alert('✅ Новый код отправлен!');
                        
                        // Очищаем поля ввода
                        codeInputs.forEach(input => input.value = '');
                        codeInputs[0].focus();
                    } else {
                        alert('❌ Ошибка отправки кода. Попробуйте позже.');
                        resendCode.style.display = 'inline';
                    }
                });
            }
    
            // ==================== СИСТЕМА УСЛУГ ====================
    
            // Обработчик выбора услуги
            serviceOptions.forEach(option => {
                option.addEventListener('click', () => {
                    serviceOptions.forEach(opt => opt.classList.remove('selected'));
                    option.classList.add('selected');
                    selectedService = option.getAttribute('data-service');
                    selectedServiceProvider = option.getAttribute('data-provider');
                });
            });
    
            // Обработчик отправки заявки на услугу
            if (sendServiceRequest) {
                sendServiceRequest.addEventListener('click', async () => {
                    if (!selectedService) {
                        alert('Пожалуйста, выберите услугу');
                        return;
                    }
                    
                    const telegramUsername = serviceUsernameInput.value.trim();
                    if (!telegramUsername) {
                        alert('Пожалуйста, введите ваш Telegram username');
                        return;
                    }
                    
                    if (!currentUser) {
                        alert('Пожалуйста, войдите в систему');
                        return;
                    }
                    
                    // Получаем информацию о пользователе
                    const user = mockData.users.find(u => u.username === currentUser);
                    if (!user) {
                        alert('Ошибка: пользователь не найден');
                        return;
                    }
                    
                    // Создаем заявку на услугу
                    const serviceRequest = {
                        id: mockData.services.length + 1,
                        service: selectedService,
                        provider: selectedServiceProvider,
                        customer: currentUser,
                        customerTelegram: telegramUsername.startsWith('@') ? telegramUsername : '@' + telegramUsername,
                        status: 'Новая',
                        date: new Date().toLocaleString('ru-RU'),
                        userRank: user.rank
                    };
                    
                    mockData.services.push(serviceRequest);
                    saveData();
                    
                    // Показываем загрузку
                    sendServiceRequest.disabled = true;
                    sendServiceRequest.textContent = 'Отправка...';
                    
                    // Отправляем уведомление поставщику услуги
                    const sent = await sendServiceNotification(serviceRequest);
                    
                    // Восстанавливаем кнопку
                    sendServiceRequest.disabled = false;
                    sendServiceRequest.textContent = 'Отправить заявку';
                    
                    if (sent) {
                        alert(`✅ Заявка на услугу "${getServiceName(selectedService)}" отправлена! ${selectedServiceProvider} свяжется с вами в Telegram.`);
                        servicesModal.style.display = 'none';
                        
                        // Сбрасываем выбор
                        serviceOptions.forEach(opt => opt.classList.remove('selected'));
                        selectedService = null;
                        selectedServiceProvider = null;
                    } else {
                        alert('❌ Ошибка при отправке заявки. Пожалуйста, попробуйте позже.');
                    }
                });
            }
    
            // Получение названия услуги по коду
            function getServiceName(serviceCode) {
                const serviceNames = {
                    'protection': 'Защита терры',
                    'resources': 'Поиск ресурсов',
                    'project_help': 'Помощь в проекте',
                    'kolbasa': 'Колбаса',
                    'bot_creation': 'Создание ботов',
                    'linux_help': 'Помощь в линуксе',
                    'building_tips': 'Уроки строительства',
                    'scene_creation': 'Создание сцен',
                    'pvp_training': 'Обучение по PvP'
                };
                
                return serviceNames[serviceCode] || serviceCode;
            }
    
            // Отправка уведомления о заказе услуги
            async function sendServiceNotification(serviceRequest) {
                try {
                    const serviceName = getServiceName(serviceRequest.service);
                    
                    const messageToProvider = `🛎️ <b>Новая заявка на услугу!</b>\n\n📋 <b>Услуга:</b> ${serviceName}\n👤 <b>Клиент:</b> ${serviceRequest.customer}\n📱 <b>Telegram:</b> ${serviceRequest.customerTelegram}\n⭐ <b>Звание:</b> ${serviceRequest.userRank}\n📅 <b>Дата:</b> ${serviceRequest.date}\n\n⚠️ <b>Свяжитесь с клиентом как можно скорее!</b>`;
                    
                    const messageToCustomer = `✅ <b>Ваша заявка принята!</b>\n\n📋 <b>Услуга:</b> ${serviceName}\n👨‍💻 <b>Исполнитель:</b> ${serviceRequest.provider}\n📅 <b>Дата заявки:</b> ${serviceRequest.date}\n\n📞 <b>${serviceRequest.provider}</b> свяжется с вами в ближайшее время.\n\n⏳ <i>Если в течение 24 часов вам не ответили, обратитесь к администраторам клана.</i>`;
                    
                    console.log('📤 Уведомление поставщику:', messageToProvider);
                    console.log('📤 Уведомление клиенту:', messageToCustomer);
                    
                    // Отправка поставщику
                    const providerChatId = ADMIN_CHAT_IDS[serviceRequest.provider.replace('@', '')];
                    let providerSent = false;
                    if (providerChatId) {
                        providerSent = await sendTelegramMessage(providerChatId, messageToProvider);
                    }
                    
                    // Отправка клиенту
                    const customerSent = await sendTelegramMessage(serviceRequest.customerTelegram, messageToCustomer);
                    
                    return providerSent && customerSent;
                } catch (error) {
                    console.error('❌ Ошибка отправки уведомления об услуге:', error);
                    return false;
                }
            }
    
            // ==================== СИСТЕМА ВХОДА ====================
    
            // Обработчик формы входа
            if (loginForm) {
                loginForm.addEventListener('submit', (e) => {
                    e.preventDefault();
                    
                    const username = document.getElementById('loginUsername').value.trim();
                    const password = document.getElementById('loginPassword').value;
                    
                    if (!username || !password) {
                        alert('Пожалуйста, заполните все поля!');
                        return;
                    }
                    
                    // Поиск пользователя
                    const user = mockData.users.find(u => u.username === username && u.password === password);
                    
                    if (user) {
                        if (user.isVerified) {
                            currentUser = username;
                            isAdmin = checkAdmin(username);
                            updateUI();
                            
                            alert('✅ Успешный вход в систему! Добро пожаловать!');
                        } else {
                            alert('❌ Ваш аккаунт не верифицирован. Пожалуйста, завершите верификацию.');
                        }
                    } else {
                        alert('❌ Неверный никнейм или пароль!');
                    }
                });
            }
    
            // Обработчик выхода
            if (logoutBtn) {
                logoutBtn.addEventListener('click', () => {
                    currentUser = null;
                    isAdmin = false;
                    updateUI();
                    alert('Вы вышли из системы');
                });
            }
    
            // ==================== ОБРАБОТЧИКИ ИНТЕРФЕЙСА ====================
    
            // Переключение между формами входа и регистрации
            authTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const target = tab.getAttribute('data-tab');
                    
                    authTabs.forEach(t => t.classList.remove('active'));
                    authForms.forEach(f => {
                        f.classList.remove('active');
                        f.style.display = 'none';
                    });
                    
                    tab.classList.add('active');
                    const targetForm = document.getElementById(`${target}Form`);
                    if (targetForm) {
                        targetForm.style.display = 'block';
                        targetForm.classList.add('active');
                    }
                    
                    // Сбрасываем форму верификации если она была открыта
                    if (verificationForm) {
                        verificationForm.style.display = 'none';
                        verificationForm.classList.remove('active');
                    }
                    
                    // Сбрасываем успешное сообщение
                    if (successMessage) {
                        successMessage.style.display = 'none';
                    }
                });
            });
    
            // Services modal
            if (servicesBtn) {
                servicesBtn.addEventListener('click', () => {
                    if (servicesModal) servicesModal.style.display = 'flex';
                });
            }
            
            if (closeServicesModal) {
                closeServicesModal.addEventListener('click', () => {
                    if (servicesModal) servicesModal.style.display = 'none';
                });
            }
    
            // Admin button
            if (adminBtn) {
                adminBtn.addEventListener('click', () => {
                    if (isAdmin) {
                        if (adminPanel) adminPanel.style.display = 'block';
                        if (mainContent) mainContent.style.display = 'none';
                    }
                });
            }
    
            // Back to main from admin
            if (backToMain) {
                backToMain.addEventListener('click', () => {
                    if (adminPanel) adminPanel.style.display = 'none';
                    if (mainContent) mainContent.style.display = 'grid';
                });
            }
    
            // Theme toggle
            if (themeToggle) {
                themeToggle.addEventListener('change', function() {
                    document.body.classList.toggle('liquid-glass');
                    
                    // Показываем предупреждение для слабых устройств
                    if (this.checked) {
                        performanceWarning.style.display = 'block';
                        setTimeout(() => {
                            performanceWarning.style.display = 'none';
                        }, 5000);
                    }
                });
            }
    
            // ==================== ИНИЦИАЛИЗАЦИЯ ====================
    
            // Initialize
            initializeData();
            updateUI();
    
            console.log('🚀 Система клана МВД с верификацией инициализирована');
            console.log('💾 Данные загружены:', mockData);
            console.log('🤖 Telegram Bot Token:', TELEGRAM_BOT_TOKEN);
        });
    </script>
</body>
</html>
